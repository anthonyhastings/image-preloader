<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Image Preloading</title>
	<link href="css/styles.css" media="screen" rel="stylesheet" />
</head>
<body>
	<div id="imgContainer">
		<img class="hiddenUntilPreloaded" width="200" height="300" src="//fillmurray.com/200/300" alt="Test Image 01" />
		<img class="hiddenUntilPreloaded" width="300" height="200" src="//fillmurray.com/g/300/200" alt="Test Image 02" />
		<img class="hiddenUntilPreloaded" width="200" height="200" src="//fillmurray.com/g/200/200" alt="Test Image 03" />
	</div>

	<script src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
	<script>
		require([
			'../js/ImagePreloader'
		], function(
			ImagePreloader
		) {
			/**
			 *	Wrapper to run the imagePreloading method.
			 */
			function preloadImage(imageElement) {
				new ImagePreloader(imageElement.src, function() {
					imageElement.className = '';
				});
			}

			// Select images needing preloaded, then cycle through them run the preload method.
			var imagesToPreload = document.querySelectorAll('#imgContainer > .hiddenUntilPreloaded');
			for (var i = 0, length = imagesToPreload.length; i < length; i++) {
				preloadImage(imagesToPreload[i]);
			}
		});
	</script>
</body>
</html>